{% extends 'base_dashboard.html' %}

{% block title %}Create Appointment{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Create Appointment</h2>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <div class="mb-3">
            <label for="patient" class="form-label">Select Patient</label>
            <select name="patient" id="patient" class="form-select" required>
                <option value="">-- Choose Patient --</option>
                {% for patient in patients %}
                    <option value="{{ patient.id }}">{{ patient.full_name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="doctor" class="form-label">Assign Doctor</label>
            <select name="doctor" id="doctor" class="form-select" required>
                <option value="">-- Choose Doctor --</option>
                {% for doctor in doctors %}
                    <option value="{{ doctor.id }}">{{ doctor.get_full_name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="date" class="form-label">Appointment Date</label>
            <input type="date" id="date" name="date" class="form-control" required>
        </div>

        <div class="mb-3">
            <label for="time" class="form-label">Appointment Time</label>
            <input type="time" id="time" name="time" class="form-control" required>
        </div>

        <div class="mb-3">
            <label for="reason" class="form-label">Reason</label>
            <textarea id="reason" name="reason" class="form-control" rows="3" required></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Create Appointment</button>
        <a href="{% url 'appointment_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}
